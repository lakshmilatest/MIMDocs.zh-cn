---
title: "容量规划指南 | Microsoft Docs"
description: "使用本指南了解部署 MIM 2016（包括负载级别和策略决策）之前应该考虑的变量。"
keywords: 
author: billmath
ms.author: barclayn
manager: mbaldwin
ms.date: 10/12/2017
ms.topic: article
ms.service: microsoft-identity-manager
ms.technology: security
ms.assetid: 3ac5b990-1678-4996-996d-cbd84b8426b4
ms.reviewer: mwahl
ms.suite: ems
ms.openlocfilehash: 32cdf03ffa0d0d282a6277af766f97e93e3a3f3a
ms.sourcegitcommit: 06add1a636720f74bc0c0f25b4100b19f1bd31da
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/17/2017
---
# <a name="capacity-planning-guide"></a>容量规划指南

Microsoft Identity Manager (MIM) 可用于创建、更新和删除整个组织内的用户帐户。 最终用户还可用它来管理其自身帐户的自助服务功能。 甚至在小型环境中，也可快速添加所有这些操作。

在开始使用 MIM 之前，请利用本指南以及测试环境，了解针对你的部署的适当范围。 本文将讲述很多应考虑的常见因素。 虽然每个部署都是唯一的，但要确定适合你需求的服务器、硬件或拓扑，在实验室中测试你的方案仍然是一种最佳方式。

如果你尚不熟悉 MIM 2016 及其组件，请在继续之前获取有关 [Microsoft Identity Manager 2016](microsoft-identity-manager-2016.md) 的更多详细信息。

## <a name="overview"></a>概述

有许多因素可能会影响到 Microsoft Identity Manager 部署的整体容量和性能：

- 以物理方式部署 MIM 组件（拓扑）的方法。
- 运行这些组件的硬件。
- MIM 策略配置对象的数量和复杂程度是规划容量时需要考虑的重要因素。
- 部署的预期规模以及预期负载通常是影响性能和容量的更明显的因素。

下表介绍了影响 MIM 2016 部署的容量和性能的主要因素：

| 设计因素 | 注意事项 |
| ------------- | -------------- |
| 拓扑 | MIM 服务在网络上计算机之间的分布。 |
| 硬件 | 每个 MIM 组件的物理硬件（物理或虚拟），包括 CPU、内存、网络适配器和硬盘驱动器配置。 |
| MIM 策略配置对象 | MIM 策略配置对象的数量和类型，包括集、管理策略规则 (MPRs) 和工作流。 |
| 扩展 | 由 MIM 2016 管理的用户、组、计算组和自定义对象类型。 此外，应考虑动态组的复杂程度，并确保考虑组嵌套。 |
| 加载 | 使用频率。 每分钟或每小时的操作数，例如新建用户或组、重置密码或访问门户的次数。 请注意，在小时、天、周或年的时间段期间，负载可能会有变化。 你可能选择设计峰值负载或平均负载，具体取决于组件。 |

## <a name="hosting-microsoft-identity-manager-components"></a>托管 Microsoft 标识管理器组件

Microsoft Identity Manager 的组件不需要位于同一台计算机上。 容量计划的一个重要部分就是考虑这些组件，以及将承载它们的物理计算机或虚拟机。

硬件因素会影响 MIM 环境的性能。 例如：

- 对于运行 MIM 2016 服务 SQL 数据库的计算机，其物理磁盘配置是什么？ 构成磁盘配置的轴数或日志及数据文件的分发可能会显著影响系统性能。

此外，请考虑配置中的外部因素。 例如：

- 如果使用 SAN 作为 MIM 2016 服务数据库配置，那么有哪些其他的应用程序在共享 SAN？ 这些应用程序在争夺 SAN 上的共享磁盘资源时可能会影响数据库性能。

## <a name="users-and-groups"></a>用户和组

考虑部署的规模时，环境中的用户数和组数是通常需考虑的因素。 此外，规划中还有其他一些应纳入考虑的相关事项。

- 用户可以创建组吗？ 如果可以，应预估用户创建新组会如何影响你环境中组的增长。

- 是否将部署动态组？ 了解你的环境中需要多少数量、何种类型的动态组。

## <a name="expected-load-levels"></a>期望负载级别

还应考虑 MIM 组件上的负载的类型。 需要通过查看环境中的当前应用程序来估计负载。 需考虑的一些相关问题包括：

- 加入或离开组的请求的预期频率。

- 用户创建静态或动态组的预期频率。

- 你需要多少个非用户驱动的操作，例如来自外部系统的更改同步？ 确保考虑到了因标识信息与外部系统同步而产生的负载。

- 你计划部署那种方案？ 不同的方案会导致不同的负载模式。 例如，安装了 MIM 2016 客户端的客户端计算机会定期验证登录时是否需要注册。

- 是否预期负载级别包括从正常到峰值不等的各种不同级别？ 例如在节假日后，往往出现大量的密码重置操作。 请确保在预期的使用峰值之外进行系统维护和执行同步计划。 考虑容量规划时，请务必确保将峰值负载时间段纳入考虑范围。

## <a name="policy-configuration-objects"></a>策略配置对象

MIM 策略配置对象包含 MPR、集、工作流以及用于部署的同步规则。 MIM 部署对于每个客户都是唯一的，因为将更改策略配置以满足每个部署的需求。 关键的性能注意事项包括以下 MIM 策略配置对象：

- **集**必须根据现有集成员身份和导致集成员身份更改的更新对系统中的每个操作进行评估。 例如，更改个人办公室的建筑号可能不会产生很大的影响。 但是，其他更改可能会产生级联影响，如管理器的更改，可能会影响多个级别的多个对象。

- **管理策略规则** MPR 管理访问控制规则和触发工作流。 创建 MPR 可能需要增加集的数量，以便捕获各种对象转换状态。 这些增加的集可能会触发其他工作流，其中每个工作流映射到系统中的唯一请求。 因此，这成为规划容量时要考虑的另一个因素。

MIM 策略配置还包括环境中的相关配置决策。 请确保考虑了以下几点：

- 你会跨多个 Active Directory 域服务 (AD DS) 林设置外部安全原则吗？ 这么做会生成更多工作流和请求，进而导致系统上产生额外负载。

- 你会使用无代码设置吗？ 如果使用无代码设置，会影响预期的规则条目数，以及系统中关联的请求和工作流。

## <a name="next-steps"></a>后续步骤

- [部署 MIM 的拓扑注意事项](topology-considerations.md)
- [Forefront Identity Manager (FIM) 2010 容量规划指南](http://go.microsoft.com/fwlink/?LinkId=200180)（可下载）详尽介绍了测试版本和性能测试结果的相关信息。
