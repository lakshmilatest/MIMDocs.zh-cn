---
# required metadata

title: 容量规划指南 | Microsoft 标识管理器
description: 使用本指南了解部署 MIM 2016（包括负载级别和策略决策）之前应该考虑的变量。
keywords:
author: kgremban
manager: stevenpo
ms.date: 04/28/2016
ms.topic: article
ms.prod: identity-manager-2015
ms.service: microsoft-identity-manager
ms.technology: security
ms.assetid: 3ac5b990-1678-4996-996d-cbd84b8426b4

# optional metadata

#ROBOTS:
#audience:
#ms.devlang:
ms.reviewer: mwahl
ms.suite: ems
#ms.tgt_pltfrm:
#ms.custom:

---

# 容量规划指南

本指南的目的在于帮助客户进行规划，但不应单独使用它来确定 Microsoft 标识管理器 (MIM) 部署所需的相应服务器、硬件或拓扑。 鼓励和期待组织配置自己的测试环境以更准确地估计容量和性能。 Microsoft 无法保证所有组织都能获得相同的容量或性能特征，即使 MIM 2016 组件的部署和配置与本指南中描述的完全一致。

为了正确准备你的 MIM 部署，请在实验设置中模拟预期的生产环境并对其进行测试。 你可能会决定测试不同类型的硬件上运行的不同拓扑，然后测试不同的扩展和负载方案，这可以帮助你更好地估计在你的环境中部署 MIM 2016 时可能发生的情况。


## 概述
有许多变量可能会影响到你的 Microsoft 标识管理器部署的整体容量和性能。 物理部署 MIM 组件（拓扑）的方式以及运行组件的硬件，是决定你可以从 MIM 部署中获得的性能和容量的重要因素。 MIM 策略配置对象的数量和复杂程度作为影响因素可能不那么明显，但在规划容量时它们仍是需要考虑的重要因素。 最后，部署的预期规模以及预期负载通常是影响性能和容量的更明显的因素。

下表讨论了可影响 MIM 2016 部署的预期容量和性能的主要因素。

| 设计因素 | 注意事项 |
| ------------- | -------------- |
| 拓扑 | MIM 服务在网络上计算机之间的分布。 例如，MIM 2016 同步服务是否可由承载其数据库的计算机承载？ |
| 硬件 | 运行每个 MIM 组件的物理硬件和任何虚拟化硬件的规格 这包括 CPU、内存、网络适配器和硬盘驱动器配置。 |
| MIM 策略配置对象 | MIM 策略配置对象的数量和类型，包括集、管理策略规则 (MPRs) 和工作流。 例如，为操作触发了多少个工作流？ 存在多少集定义，并且每个定义相对来说有多复杂？ |
| 扩展 | 用户、组、计算组和自定义对象类型的数量，例如将由 MIM 2016 管理的计算机数量。 此外，应考虑动态组的复杂程度，并确保考虑组嵌套。 |
| 加载 | 预计使用频率。 例如，你预期给定时间段内创建新组或用户、重置密码或访问门户的次数。 请注意，在小时、天、周或年的时间段期间，负载可能会有变化。 你可能需要设计峰值负载或平均负载，具体取决于组件。


## 托管 Microsoft 标识管理器组件
Microsoft 标识管理器有许多不同的组件。 在许多情况下，这些组件并不位于同一台计算机上。 从容量规划角度来考虑 MIM 时，托管它的组件和物理计算机（可能的话还包括虚拟机）是需要考虑的重要因素。 有许多因素可能会影响 MIM 环境的性能。例如，运行 MIM 2016 服务 SQL 数据库的计算机的物理磁盘配置。 构成磁盘配置的轴数或日志及数据文件的分发可能会显著影响系统性能。 此外，请考虑配置中的外部因素。 如果使用 SAN 作为 MIM 2016 服务数据库配置，那么有哪些其他的应用程序在共享 SAN？ 这些应用程序在竞争 SAN 上的共享磁盘资源时会如何影响数据库性能？ 当多个应用程序竞争相同的磁盘资源时，可能会导致产生瓶颈和磁盘性能异常。


## 用户和组
考虑部署的规模时，环境中的用户数和组数是通常需考虑的因素。 此外，规划中还有其他一些应纳入考虑的相关事项。 这些需要考虑的事项包括：

- 用户可以创建组吗？ 如果可以，应预估用户创建新组会如何影响你环境中组的增长。

- 是否将部署动态组？
  - 将部署哪些类型的动态组？
  - 可能要部署多少个动态组？


## 期望负载级别
还应考虑 MIM 组件上的负载的类型。 需考虑的一些相关问题包括：

- 加入或离开组的请求的预期频率。

- 用户创建静态或动态组的预期频率。

- 你是否可从你环境中的现有应用程序获取此信息？

- 非用户驱动操作的预期负载，例如来自外部系统的更改的同步。 确保考虑到因标识信息的操作与外部系统进行同步而产生的负载。

- 你计划部署那种方案？ 不同的方案会导致不同的负载模式。 例如，安装了 MIM 2016 客户端的客户端计算机会定期验证登录时是否需要注册，这会增加系统负荷。

- 是否预期负载级别包括从正常到峰值不等的各种不同级别？ 例如，是否预期假日后出现大量的密码重置？ 请确保在预期的使用峰值之外进行系统维护和执行同步计划。 考虑容量规划时，请务必确保将峰值负载时间段纳入考虑范围。


## 策略配置对象

Microsoft 标识管理器策略配置对象表示 MIM 部署的业务逻辑。 在这个区域中，每个 MIM 实现将很可能是唯一的，因为策略配置特定于每个部署的需求。 MIM 策略配置对象包含 MPR、集、工作流以及用于特定部署的同步规则。 与 MIM 策略配置对象相关的重要性能注意事项包括：

- **集**必须根据现有集成员身份和导致集成员身份更改的更新对系统中的每个操作进行评估。 例如，简单更改（例如对个人办公室的建筑号的更改）可能不会产生很大的影响。 但是，其他更改可能会产生级联影响，如管理器的更改，可能会影响多个级别的多个对象。

- **管理策略规则** MPR 用于控制访问控制规则和触发工作流。 创建 MPR 时，可能会需要增加集的数量，以便捕获各种对象转换状态。 这些增加的集可能会触发其他工作流，其中每个工作流映射到系统中的唯一请求。 因此，这成为规划容量时要考虑的另一个因素。

处理 MIM 策略配置对象时，还应考虑以下事项：

- 你会跨多个 Active Directory 域服务 (AD DS) 林设置外部安全原则吗？ 这么做会生成更多工作流和请求，进而导致系统上产生额外负载。

- 你会使用无代码设置吗？ 如果使用无代码设置，会影响预期的规则条目数，以及系统中关联的请求和工作流。


## 另请参阅
- [Forefront 标识管理器 (FIM) 2010 容量规划指南](http://go.microsoft.com/fwlink/?LinkId=200180)（可下载）详尽介绍了有关测试版本和性能测试结果的相关信息。


<!--HONumber=Apr16_HO2-->


